<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="black" name="apple-mobile-web-app-status-bar-style" />
<meta name="referrer" content="never">
<meta name="keywords" content="">
<meta name="description" content="欢迎访问[tianxia]的个人博客">
<meta name="author" content="kveln">
<title>gradle项目与任务 | tianxia</title>
<link rel="stylesheet" href="https://tinaxiawuhao.github.io/resource/bootstrap.min.css">
<link href="https://tinaxiawuhao.github.io/resource/all.min.css" rel="stylesheet">
<link rel="alternate" type="application/rss+xml" title="gradle项目与任务 | tianxia » Feed"
  href="https://tinaxiawuhao.github.io/atom.xml">
<link rel="stylesheet"
  href="https://tinaxiawuhao.github.io/resource/androidstudio.min.css">
<link href="https://tinaxiawuhao.github.io/styles/main.css" rel="stylesheet">
<script src="https://tinaxiawuhao.github.io/resource/jquery.min.js"></script>

<script src="https://tinaxiawuhao.github.io/resource/highlight.min.js"></script>

<link rel="stylesheet" href="https://tinaxiawuhao.github.io/resource/live2d.css">

<script>hljs.initHighlightingOnLoad();</script>

  <meta property="og:description" content="gradle项目与任务" />
  <meta property="og:url" content="https://tinaxiawuhao.github.io/post/lhyr_DiZc/" />
  <meta property="og:locale" content="zh-CN" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="tianxia" />
  <!-- <script src="../assets/styles/scripts/tocScript.js"></script> -->
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="https://tinaxiawuhao.github.io">tianxia</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
      data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
      aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        
        <li class="nav-item">
          
          <a class="nav-link" href="/">首页</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/archives">归档</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/tags">标签</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/post/about">关于</a>
          
        </li>
        
        <li class="nav-item">
          <div class="gridea-search-container">
            <form id="gridea-search-form" style="position: relative" data-update="1658230910810"
              action="/search/index.html">
              <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
              <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
  <!-- Page Header -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="https://tinaxiawuhao.github.io">tianxia</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
      data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
      aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        
        <li class="nav-item">
          
          <a class="nav-link" href="/">首页</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/archives">归档</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/tags">标签</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/post/about">关于</a>
          
        </li>
        
        <li class="nav-item">
          <div class="gridea-search-container">
            <form id="gridea-search-form" style="position: relative" data-update="1658230910810"
              action="/search/index.html">
              <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
              <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
<header class="masthead" style="background-image: url('https://tinaxiawuhao.github.io/media/images/home-bg.jpg')">
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        
          <!-- 没Title为其他页面Header -->
          
            <!-- 没Title并且有headerType为Post：文章Header -->
            <div class="post-heading">
              <span class="tags">
                
                <a href="https://tinaxiawuhao.github.io/tag/_whMOC5wx/" class="tag">gradle</a>
                
              </span>
              <h1>gradle项目与任务</h1>
              <span class="meta">
                Posted on
                2021-07-03，8 min read
              </span>
            </div>
          
        
      </div>
    </div>
  </div>
</header>
  <!-- Post Content -->
  <article id="post-content-article">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto post-content-container">
          
          <img class="post-feature-header-image" src="https://tinaxiawuhao.github.io/post-images/lhyr_DiZc.png" alt="封面图">
          </img>
          
          <h3 id="项目与任务">项目与任务</h3>
<p>Gradle中的所有内容都位于两个基本概念之上：</p>
<ul>
<li>projects ：每个Gradle构建都由一个或多个 projects组成 ，一个projects代表什么取决于您使用Gradle做的事情。例如，一个projects可能代表一个JAR库或一个Web应用程序。</li>
<li>tasks ：每个projects由一个或多个 tasks组成 。tasks代表构建执行的一些原子工作。这可能是编译某些类，创建JAR，生成Javadoc或将一些存档发布到存储库。</li>
</ul>
<h3 id="项目">项目</h3>
<p>表.项目属性</p>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">project</td>
<td style="text-align:left">Project</td>
<td style="text-align:left">该Project实例</td>
</tr>
<tr>
<td style="text-align:left">name</td>
<td style="text-align:left">String</td>
<td style="text-align:left">项目目录的名称。</td>
</tr>
<tr>
<td style="text-align:left">path</td>
<td style="text-align:left">String</td>
<td style="text-align:left">项目的绝对路径。</td>
</tr>
<tr>
<td style="text-align:left">description</td>
<td style="text-align:left">String 项目说明。</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">projectDir</td>
<td style="text-align:left">File</td>
<td style="text-align:left">包含构建脚本的目录。</td>
</tr>
<tr>
<td style="text-align:left">buildDir</td>
<td style="text-align:left">File</td>
<td style="text-align:left"><em>projectDir</em> /build</td>
</tr>
<tr>
<td style="text-align:left">group</td>
<td style="text-align:left">Object</td>
<td style="text-align:left">unspecified</td>
</tr>
<tr>
<td style="text-align:left">version</td>
<td style="text-align:left">Object</td>
<td style="text-align:left">unspecified</td>
</tr>
<tr>
<td style="text-align:left">ant</td>
<td style="text-align:left">ant build</td>
<td style="text-align:left">一个AntBuilder实例</td>
</tr>
</tbody>
</table>
<h3 id="任务">任务</h3>
<h4 id="定义任务">定义任务</h4>
<ol>
<li>使用字符串作为任务名称定义任务</li>
<li>使用tasks容器定义任务</li>
<li>使用DSL特定语法定义任务</li>
</ol>
<p>例：<br>
<strong>build.gradle</strong></p>
<pre><code class="language-groovy">// 使用字符串作为任务名称定义任务
task('hello') {
    doLast {
        println &quot;hello&quot;
    }
}
// 使用tasks容器定义任务
tasks.create('hello') {
    doLast {
        println &quot;hello&quot;
    }
}
// 使用DSL特定语法定义任务
task(hello) {
    doLast {
        println &quot;hello&quot;
    }
}
task('copy', type: Copy) {
    from(file('srcDir'))
    into(buildDir)
}
</code></pre>
<h4 id="定位任务">定位任务</h4>
<ul>
<li>使用DSL特定语法访问任务</li>
<li>通过任务集合访问任务</li>
<li>通过路径访问</li>
<li>按任务类型访问任务</li>
</ul>
<pre><code class="language-groovy">task hello
task copy(type: Copy)
 
 
// 使用DSL特定语法访问任务
println hello.name
println project.hello.name
 
println copy.destinationDir
println project.copy.destinationDir
 
// 通过任务集合访问任务
println tasks.hello.name
println tasks.named('hello').get().name
 
println tasks.copy.destinationDir
println tasks.named('copy').get().destinationDir
 
 
//按任务类型访问任务
tasks.withType(Tar).configureEach {
    enabled = false
}
 
task test {
    dependsOn tasks.withType(Copy)
}
</code></pre>
<p>通过路径访问</p>
<p><strong>project-a / build.gradle</strong></p>
<pre><code class="language-shell">task hello
</code></pre>
<p><strong>build.gradle</strong></p>
<pre><code class="language-groovy">task hello
 
println tasks.getByPath('hello').path
println tasks.getByPath(':hello').path
println tasks.getByPath('project-a:hello').path
println tasks.getByPath(':project-a:hello').path
</code></pre>
<h4 id="配置任务">配置任务</h4>
<h5 id="使用api配置任务">使用API配置任务</h5>
<p>例：<br>
<strong>build.gradle</strong></p>
<pre><code class="language-groovy">Copy myCopy = tasks.getByName(&quot;myCopy&quot;)
myCopy.from 'resources'
myCopy.into 'target'
myCopy.include('**/*.txt', '**/*.xml', '**/*.properties')
</code></pre>
<h5 id="使用dsl特定语法配置任务">使用DSL特定语法配置任务</h5>
<p>例：<br>
<strong>build.gradle</strong></p>
<pre><code class="language-groovy">// Configure task using Groovy dynamic task configuration block
myCopy {
   from 'resources'
   into 'target'
}
myCopy.include('**/*.txt', '**/*.xml', '**/*.properties')
</code></pre>
<h5 id="用配置块定义一个任务">用配置块定义一个任务</h5>
<p>例：<br>
<strong>build.gradle</strong></p>
<pre><code class="language-groovy">task copy(type: Copy) {
   from 'resources'
   into 'target'
   include('**/*.txt', '**/*.xml', '**/*.properties')
}
</code></pre>
<h4 id="将参数传递给任务构造函数">将参数传递给任务构造函数</h4>
<p>与Task在创建后配置可变属性相反，您可以将参数值传递给Task类的构造函数。为了将值传递给Task构造函数，您必须使用@javax.inject.Inject注释相关的构造函数。</p>
<p>首先创建带有@Inject构造函数的任务类</p>
<pre><code class="language-groovy">class CustomTask extends DefaultTask {
    final String message
    final int number
 
    @Inject
    CustomTask(String message, int number) {
        this.message = message
        this.number = number
    }
}
</code></pre>
<p>然后创建一个任务，并在参数列表的末尾传递构造函数参数。</p>
<pre><code class="language-groovy">tasks.create('myTask', CustomTask, 'hello', 42)
</code></pre>
<p>你也可以使用Map创建带有构造函数参数的任务</p>
<pre><code class="language-groovy">task myTask(type: CustomTask, constructorArgs: ['hello', 42])
</code></pre>
<h4 id="向任务添加依赖项">向任务添加依赖项</h4>
<p>从另一个项目添加对任务的依赖</p>
<pre><code class="language-groovy">project('project-a') {
    task taskX {
        dependsOn ':project-b:taskY'
        doLast {
            println 'taskX'
        }
    }
}
 
project('project-b') {
    task taskY {
        doLast {
            println 'taskY'
        }
    }
}
</code></pre>
<h4 id="使用任务对象添加依赖">使用任务对象添加依赖</h4>
<pre><code class="language-groovy">task taskX {
    doLast {
        println 'taskX'
    }
}
 
task taskY {
    doLast {
        println 'taskY'
    }
}
 
 
taskX.dependsOn taskY
</code></pre>
<h4 id="使用惰性块添加依赖项">使用惰性块添加依赖项</h4>
<pre><code class="language-groovy">task taskX {
    doLast {
        println 'taskX'
    }
}
 
// Using a Groovy Closure
taskX.dependsOn {
    tasks.findAll { task -&gt; task.name.startsWith('lib') }
}
 
task lib1 {
    doLast {
        println 'lib1'
    }
}
 
task lib2 {
    doLast {
        println 'lib2'
    }
}
 
task notALib {
    doLast {
        println 'notALib'
    }
}
</code></pre>
<h4 id="任务排序">任务排序</h4>
<p>控制任务排序的两种方式：</p>
<ul>
<li>must run after ：必须在之后运行</li>
<li>should run after：应该在之后运行</li>
</ul>
<p>例</p>
<pre><code class="language-groovy">task taskX {
    doLast {
        println 'taskX'
    }
}
task taskY {
    doLast {
        println 'taskY'
    }
}
taskY.mustRunAfter taskX
</code></pre>
<p>should run after被忽略的情况</p>
<ul>
<li>引入排序周期。</li>
<li>使用并行执行时，除了 &quot;should run after &quot;任务外，一个任务的所有依赖关系都已被满足，</li>
</ul>
<p>引入排序周期例子</p>
<pre><code class="language-groovy">task taskX {
    doLast {
        println 'taskX'
    }
}
task taskY {
    doLast {
        println 'taskY'
    }
}
task taskZ {
    doLast {
        println 'taskZ'
    }
}
taskX.dependsOn taskY
taskY.dependsOn taskZ
taskZ.shouldRunAfter taskX
</code></pre>
<h4 id="为任务添加描述">为任务添加描述</h4>
<p>您可以在任务中添加描述。执行gradle tasks时将显示此描述。</p>
<p>build.gradle</p>
<pre><code class="language-groovy">task copy(type: Copy) {
   description 'Copies the resource directory to the target directory.'
   from 'resources'
   into 'target'
   include('**/*.txt', '**/*.xml', '**/*.properties')
}
</code></pre>
<h4 id="跳过任务">跳过任务</h4>
<p>onlyIf跳过</p>
<pre><code class="language-groovy">hello.onlyIf { !project.hasProperty('skipHello') }
//StopExecutionException跳过
compile.doFirst {
    if (true) { throw new StopExecutionException() }
}
</code></pre>
<p>禁用任务</p>
<pre><code class="language-groovy">task disableMe {
    doLast {
        println 'This should not be printed if the task is disabled.'
    }
}
disableMe.enabled = false
</code></pre>
<p>任务超时</p>
<pre><code class="language-groovy">task hangingTask() {
    doLast {
        Thread.sleep(100000)
    }
    timeout = Duration.ofMillis(500)
}
</code></pre>
<h4 id="任务规则">任务规则</h4>
<p>有时您想执行一个任务，该任务的行为取决于较大或无限数量的参数值范围。提供此类任务的一种非常好的表达方式是任务规则：</p>
<p>任务规则</p>
<pre><code class="language-groovy">tasks.addRule(&quot;Pattern: ping&lt;ID&gt;&quot;) { String taskName -&gt;
    if (taskName.startsWith(&quot;ping&quot;)) {
        task(taskName) {
            doLast {
                println &quot;Pinging: &quot; + (taskName - 'ping')
            }
        }
    }
}
 
task groupPing {
    dependsOn pingServer1, pingServer2
}
&gt; gradle -q groupPing
 
Ping：Server1
Ping：Server2
</code></pre>
<h4 id="终结器任务">终结器任务</h4>
<p>计划运行终结任务时，终结任务会自动添加到任务图中。即使完成任务失败，也将执行终结器任务。</p>
<pre><code class="language-groovy">task taskX {
    doLast {
        println 'taskX'
    }
}
task taskY {
    doLast {
        println 'taskY'
    }
}
taskX.finalizedBy taskY
&gt; gradle -q taskX
 
TaskX
TaskY
</code></pre>
<h4 id="动态任务">动态任务</h4>
<p>Groovy或Kotlin的功能可用于定义任务以外的其他功能。例如，您还可以使用它来动态创建任务。</p>
<p>build.gradle</p>
<pre><code class="language-groovy">4.times { counter -&gt;
    task &quot;task$counter&quot; {
        doLast {
            println &quot;I'm task number $counter&quot;
        }
    }
}
</code></pre>
<p>gradle -q task1 输出</p>
<pre><code class="language-shell">&gt; gradle -q task1
I'm task number 1
</code></pre>
<h4 id="groovy_dsl快捷方式符号">Groovy_DSL快捷方式符号</h4>
<p>访问任务有一种方便的表示法。每个任务都可以作为构建脚本的属性来使用：</p>
<p>例.作为构建脚本的属性访问任务</p>
<p>build.gradle</p>
<pre><code class="language-groovy">task hello {
    doLast {
        println 'Hello world!'
    }
}
hello.doLast {
    println &quot;Greetings from the $hello.name task.&quot;
}
</code></pre>
<p>输出 gradle -q hello</p>
<pre><code class="language-shell">&gt; gradle -q hello
Hello world!
Greetings from the hello task.
</code></pre>
<p>这将启用非常可读的代码，尤其是在使用插件提供的任务（例如compile任务）时。</p>
<h4 id="额外任务属性">额外任务属性</h4>
<p>您可以将自己的属性添加到任务。要添加名为的属性myProperty，请设置ext.myProperty为初始值。从那时起，可以像预定义的任务属性一样读取和设置属性。</p>
<p>build.gradle</p>
<pre><code class="language-groovy">task myTask {
    ext.myProperty = &quot;myValue&quot;
}
 
task printTaskProperties {
    doLast {
        println myTask.myProperty
    }
}
</code></pre>
<p>输出 gradle -q printTaskProperties</p>
<pre><code class="language-shell">&gt; gradle -q printTaskProperties
myValue
</code></pre>
<p>额外的属性不仅限于任务。您可以在Extra属性中阅读有关它们的更多信息。</p>
<h4 id="默认任务">默认任务</h4>
<p>Gradle允许您定义一个或多个默认任务。</p>
<p>build.gradle</p>
<pre><code class="language-groovy">defaultTasks 'clean', 'run'
 
task clean {
    doLast {
        println 'Default Cleaning!'
    }
}
 
task run {
    doLast {
        println 'Default Running!'
    }
}
 
task other {
    doLast {
        println &quot;I'm not a default task!&quot;
    }
}
</code></pre>
<p>输出 gradle -q</p>
<pre><code class="language-shell">&gt; gradle -q
Default Cleaning!
Default Running!
</code></pre>
<p>这等效于运行gradle clean run。在多项目构建中，每个子项目可以有其自己的特定默认任务。如果子项目未指定默认任务，则使用父项目的默认任务（如果已定义）。</p>

          <div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#%E9%A1%B9%E7%9B%AE%E4%B8%8E%E4%BB%BB%E5%8A%A1">项目与任务</a></li>
<li><a href="#%E9%A1%B9%E7%9B%AE">项目</a></li>
<li><a href="#%E4%BB%BB%E5%8A%A1">任务</a>
<ul>
<li><a href="#%E5%AE%9A%E4%B9%89%E4%BB%BB%E5%8A%A1">定义任务</a></li>
<li><a href="#%E5%AE%9A%E4%BD%8D%E4%BB%BB%E5%8A%A1">定位任务</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E4%BB%BB%E5%8A%A1">配置任务</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8api%E9%85%8D%E7%BD%AE%E4%BB%BB%E5%8A%A1">使用API配置任务</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8dsl%E7%89%B9%E5%AE%9A%E8%AF%AD%E6%B3%95%E9%85%8D%E7%BD%AE%E4%BB%BB%E5%8A%A1">使用DSL特定语法配置任务</a></li>
<li><a href="#%E7%94%A8%E9%85%8D%E7%BD%AE%E5%9D%97%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E4%BB%BB%E5%8A%A1">用配置块定义一个任务</a></li>
</ul>
</li>
<li><a href="#%E5%B0%86%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E7%BB%99%E4%BB%BB%E5%8A%A1%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">将参数传递给任务构造函数</a></li>
<li><a href="#%E5%90%91%E4%BB%BB%E5%8A%A1%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%E9%A1%B9">向任务添加依赖项</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E4%BB%BB%E5%8A%A1%E5%AF%B9%E8%B1%A1%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96">使用任务对象添加依赖</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E6%83%B0%E6%80%A7%E5%9D%97%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%E9%A1%B9">使用惰性块添加依赖项</a></li>
<li><a href="#%E4%BB%BB%E5%8A%A1%E6%8E%92%E5%BA%8F">任务排序</a></li>
<li><a href="#%E4%B8%BA%E4%BB%BB%E5%8A%A1%E6%B7%BB%E5%8A%A0%E6%8F%8F%E8%BF%B0">为任务添加描述</a></li>
<li><a href="#%E8%B7%B3%E8%BF%87%E4%BB%BB%E5%8A%A1">跳过任务</a></li>
<li><a href="#%E4%BB%BB%E5%8A%A1%E8%A7%84%E5%88%99">任务规则</a></li>
<li><a href="#%E7%BB%88%E7%BB%93%E5%99%A8%E4%BB%BB%E5%8A%A1">终结器任务</a></li>
<li><a href="#%E5%8A%A8%E6%80%81%E4%BB%BB%E5%8A%A1">动态任务</a></li>
<li><a href="#groovy_dsl%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F%E7%AC%A6%E5%8F%B7">Groovy_DSL快捷方式符号</a></li>
<li><a href="#%E9%A2%9D%E5%A4%96%E4%BB%BB%E5%8A%A1%E5%B1%9E%E6%80%A7">额外任务属性</a></li>
<li><a href="#%E9%BB%98%E8%AE%A4%E4%BB%BB%E5%8A%A1">默认任务</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
          
              <hr />
            
          
            
            <p class="next-post">上一篇：
                <a href="https://tinaxiawuhao.github.io/post/Ke4qDxE4l/">
                  <span class="post-title">
                    Gradle基础&rarr;
                  </span>
                </a>
              </p>
            
          
            
           <p class="prev-post">下一篇：
                 <a href="https://tinaxiawuhao.github.io/post/4WWjxpN2N/">
                   <span class="post-title">
                     Groovy基础&rarr;
                   </span>
                 </a>
               </p>
          
          <div class="comment" style="text-align: center;">
            

            
            
          </div>
        </div>
      </div>
  </article>
  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <ul class="list-inline text-center">
            
            
            <li class="list-inline-item">
              <a href="https://github.com/tinaxiawuhao" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <!-- <li class="list-inline-item">
              <a href="https://tinaxiawuhao.github.io/atom.xml" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                </span>
              </a>
              </li> -->
          </ul>
          <p class="copyright text-muted">Copyright &copy;<span>tianxia</span><br><a href="https://github.com/getgridea/gridea" class="Themeinfo">Powered by Gridea</a></p>
        </div>
      </div>
    </div>
   </footer>
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
  <!-- <script src="https://tinaxiawuhao.github.io/media/scripts/bootstrap.bundle.min.js"></script> -->
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.jsdelivr.net/gh/Alanrk/clean-cdn@1.0/scripts/clean-blog.min.js"></script>
  <!-- <script src="https://tinaxiawuhao.github.io/media/scripts/clean-blog.min.js"></script> -->
  <style type="text/css">a.back_to_top{text-decoration:none;position:fixed;bottom:40px;right:30px;background:#f0f0f0;height:40px;width:40px;border-radius:50%;line-height:36px;font-size:18px;text-align:center;transition-duration:.5s;transition-propety:background-color;display:none}a.back_to_top span{color:#888}a.back_to_top:hover{cursor:pointer;background:#dfdfdf}a.back_to_top:hover span{color:#555}@media print,screen and(max-width:580px){.back_to_top{display:none!important}}</style>
<a id="back_to_top" href="#" class="back_to_top">
  <span>▲</span></a>
<script>$(document).ready((function(_this) {
    return function() {
      var bt;
      bt = $('#back_to_top');
      if ($(document).width() > 480) {
        $(window).scroll(function() {
          var st;
          st = $(window).scrollTop();
          if (st > 30) {
            return bt.css('display', 'block')
          } else {
            return bt.css('display', 'none')
          }
        });
        return bt.click(function() {
          $('body,html').animate({
            scrollTop: 0
          },
          800);
          return false
        })
      }
    }
  })(this));</script>
  
  <div id="landlord-parent">
    <div id="landlord">
        <div class="message" style="opacity:0"></div>
        <canvas id="live2d" width="240" height="250" class="live2d"></canvas>
    </div>
</div>

<script type="text/javascript">
    if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {
        //移动端
        console.log("------ 移动端");
    } else {
        console.log("------ PC端 " + navigator.userAgent);

        addScript("https://cdn.jsdelivr.net/gh/850552586/ericamcdn@0.1/js/live2d.js", () => {
            // 加载完成后再loadlive2d
            loadlive2d("live2d", "https://tinaxiawuhao.github.io/media/live2d/assets/tororo.model.json");
        });

        var home_Path = "https://tinaxiawuhao.github.io/";
        addScript("https://tinaxiawuhao.github.io/media/live2d/js/message.js", () => { });
    }

    // 插入js文件，完成后callback
    function addScript(jsfile, callback) {
        var landlord_parent = document.getElementById("landlord-parent");
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = jsfile;
        landlord_parent.appendChild(script);
        script.onload = script.onreadystatechange = function () {
            if (!this.readyState || this.readyState === "loaded" || this.readyState === "complete") {
                script.onload = script.onreadystatechange = null;
                if (callback && typeof callback == "function") {
                    callback(); //window[callback]();如果传递字符串过来 调用window['函数名']() 调用方法
                }
            }
        };
    }
</script>
  
  <script src="https://tinaxiawuhao.github.io/media/scripts/tocScript.js"></script>
</body>

</html>