<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="black" name="apple-mobile-web-app-status-bar-style" />
<meta name="referrer" content="never">
<meta name="keywords" content="">
<meta name="description" content="欢迎访问[tianxia]的个人博客">
<meta name="author" content="kveln">
<title>SpringBoot基础 | tianxia</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">
<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">
<link rel="alternate" type="application/rss+xml" title="SpringBoot基础 | tianxia » Feed"
  href="https://tinaxiawuhao.github.io/atom.xml">
<link rel="stylesheet"
  href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/styles/androidstudio.min.css">
<link href="https://tinaxiawuhao.github.io/styles/main.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/850552586/ericamcdn@0.1/css/live2d.css">

<script>hljs.initHighlightingOnLoad();</script>

  <meta property="og:description" content="SpringBoot基础" />
  <meta property="og:url" content="https://tinaxiawuhao.github.io/post/RosSxJXYD/" />
  <meta property="og:locale" content="zh-CN" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="tianxia" />
  <!-- <script src="../assets/styles/scripts/tocScript.js"></script> -->
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="https://tinaxiawuhao.github.io">tianxia</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
      data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
      aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        
        <li class="nav-item">
          
          <a class="nav-link" href="/">首页</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/archives">归档</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/tags">标签</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/post/about">关于</a>
          
        </li>
        
        <li class="nav-item">
          <div class="gridea-search-container">
            <form id="gridea-search-form" style="position: relative" data-update="1653892425169"
              action="/search/index.html">
              <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
              <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
  <!-- Page Header -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="https://tinaxiawuhao.github.io">tianxia</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
      data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
      aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        
        <li class="nav-item">
          
          <a class="nav-link" href="/">首页</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/archives">归档</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/tags">标签</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/post/about">关于</a>
          
        </li>
        
        <li class="nav-item">
          <div class="gridea-search-container">
            <form id="gridea-search-form" style="position: relative" data-update="1653892425169"
              action="/search/index.html">
              <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
              <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
<header class="masthead" style="background-image: url('https://tinaxiawuhao.github.io/media/images/home-bg.jpg')">
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        
          <!-- 没Title为其他页面Header -->
          
            <!-- 没Title并且有headerType为Post：文章Header -->
            <div class="post-heading">
              <span class="tags">
                
                <a href="https://tinaxiawuhao.github.io/tag/9FPu79Spt/" class="tag">springBoot</a>
                
              </span>
              <h1>SpringBoot基础</h1>
              <span class="meta">
                Posted on
                2021-05-25，31 min read
              </span>
            </div>
          
        
      </div>
    </div>
  </div>
</header>
  <!-- Post Content -->
  <article id="post-content-article">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto post-content-container">
          
          <img class="post-feature-header-image" src="https://tinaxiawuhao.github.io/post-images/RosSxJXYD.png" alt="封面图">
          </img>
          
          <h1 id="一-springboot简介">一、SpringBoot简介</h1>
<h2 id="11-原有spring优缺点分析">1.1  原有Spring优缺点分析</h2>
<p><strong>1.1.1 Spring的优点分析</strong></p>
<p>Spring是Java企业版（Java Enterprise Edition，JEE，也称J2EE）的轻量级代替品。无需开发重量级的Enterprise JavaBean（EJB），Spring为企业级Java开发提供了一种相对简单的方法，通过依赖注入和面向切面编程，用简单的Java对象（Plain Old Java Object，POJO）实现了EJB的功能。</p>
<p><strong>1.1.2 Spring的缺点分析</strong></p>
<p>虽然Spring的组件代码是轻量级的，但它的配置却是重量级的。一开始，Spring用XML配置，而且是很多XML配置。Spring 2.5引入了基于注解的组件扫描，这消除了大量针对应用程序自身组件的显式XML配置。Spring 3.0引入了基于Java的配置，这是一种类型安全的可重构配置方式，可以代替XML。</p>
<p>所有这些配置都代表了开发时的损耗。因为在思考Spring特性配置和解决业务问题之间需要进行思维切换，所以编写配置挤占了编写应用程序逻辑的时间。和所有框架一样，Spring实用，但与此同时它要求的回报也不少。</p>
<p>除此之外，项目的依赖管理也是一件耗时耗力的事情。在环境搭建时，需要分析要导入哪些库的坐标，而且还需要分析导入与之有依赖关系的其他库的坐标，一旦选错了依赖的版本，随之而来的不兼容问题就会严重阻碍项目的开发进度。</p>
<h2 id="12-springboot的概述">1.2 SpringBoot的概述</h2>
<p><strong>1.2.1 SpringBoot解决上述Spring的缺点</strong></p>
<p>SpringBoot对上述Spring的缺点进行的改善和优化，基于约定优于配置的思想，可以让开发人员不必在配置与逻辑业务之间进行思维的切换，全身心的投入到逻辑业务的代码编写中，从而大大提高了开发的效率，一定程度上缩短了项目周期。</p>
<p><strong>1.2.2 SpringBoot的特点</strong></p>
<ul>
<li>为基于Spring的开发提供更快的入门体验</li>
<li>开箱即用，没有代码生成，也无需XML配置。同时也可以修改默认值来满足特定的需求</li>
<li>提供了一些大型项目中常见的非功能性特性，如嵌入式服务器、安全、指标，健康检测、外部配置等</li>
<li>SpringBoot不是对Spring功能上的增强，而是提供了一种快速使用Spring的方式</li>
</ul>
<p><strong>1.2.3 SpringBoot的核心功能</strong></p>
<ul>
<li>
<p>起步依赖</p>
<p>起步依赖本质上是一个Maven项目对象模型（Project Object Model，POM），定义了对其他库的传递依赖，这些东西加在一起即支持某项功能。</p>
<p>简单的说，起步依赖就是将具备某种功能的坐标打包到一起，并提供一些默认的功能。</p>
</li>
<li>
<p>自动配置</p>
<p>Spring Boot的自动配置是一个运行时（更准确地说，是应用程序启动时）的过程，考虑了众多因素，才决定Spring配置应该用哪个，不该用哪个。该过程是Spring自动完成的。</p>
</li>
</ul>
<p>​	注意：起步依赖和自动配置的原理剖析会在第三章《SpringBoot原理分析》进行详细讲解</p>
<h1 id="二-springboot快速入门">二、SpringBoot快速入门</h1>
<h2 id="21-代码实现">2.1 代码实现</h2>
<h3 id="211-创建maven工程">2.1.1 创建Maven工程</h3>
<p>使用idea工具创建一个maven工程，该工程为普通的java工程即可</p>
<p><img src="https://tinaxiawuhao.github.io/post-images/1621326186879.png" alt="" loading="lazy"><br>
<img src="https://tinaxiawuhao.github.io/post-images/1621326245811.png" alt="" loading="lazy"><br>
<img src="https://tinaxiawuhao.github.io/post-images/1621326301646.png" alt="" loading="lazy"><br>
<img src="https://tinaxiawuhao.github.io/post-images/1621326307461.png" alt="" loading="lazy"></p>
<h3 id="212-添加springboot的起步依赖">2.1.2 添加SpringBoot的起步依赖</h3>
<p>SpringBoot要求，项目要继承SpringBoot的起步依赖spring-boot-starter-parent</p>
<pre><code class="language-xml">&lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;2.0.1.RELEASE&lt;/version&gt;
&lt;/parent&gt;
</code></pre>
<p>SpringBoot要集成SpringMVC进行Controller的开发，所以项目要导入web的启动依赖</p>
<pre><code class="language-xml">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<h3 id="213-编写springboot引导类">2.1.3 编写SpringBoot引导类</h3>
<p>要通过SpringBoot提供的引导类起步SpringBoot才可以进行访问</p>
<pre><code class="language-java">package com.itheima;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class MySpringBootApplication {

    public static void main(String[] args) {
        SpringApplication.run(MySpringBootApplication.class);
    }

}
</code></pre>
<h3 id="214-编写controller">2.1.4 编写Controller</h3>
<p>在引导类MySpringBootApplication同级包或者子级包中创建QuickStartController</p>
<pre><code class="language-java">package com.itheima.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
public class QuickStartController {
    
    @RequestMapping(&quot;/quick&quot;)
    @ResponseBody
    public String quick(){
        return &quot;springboot 访问成功!&quot;;
    }
    
}
</code></pre>
<h3 id="215-测试">2.1.5 测试</h3>
<p>执行SpringBoot起步类的主方法，控制台打印日志如下：</p>
<pre><code>.   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.0.1.RELEASE)

2018-05-08 14:29:59.714  INFO 5672 --- [           main] com.itheima.MySpringBootApplication      : Starting MySpringBootApplication on DESKTOP-RRUNFUH with PID 5672 (C:\Users\muzimoo\IdeaProjects\IdeaTest\springboot_quick\target\classes started by muzimoo in C:\Users\muzimoo\IdeaProjects\IdeaTest)
... ... ...
o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2018-05-08 14:30:03.126  INFO 5672 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup
2018-05-08 14:30:03.196  INFO 5672 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2018-05-08 14:30:03.206  INFO 5672 --- [           main] com.itheima.MySpringBootApplication      : Started MySpringBootApplication in 4.252 seconds (JVM running for 5.583)
</code></pre>
<p>通过日志发现，Tomcat started on port(s): 8080 (http) with context path ''</p>
<p>tomcat已经起步，端口监听8080，web应用的虚拟工程名称为空</p>
<p>打开浏览器访问url地址为：http://localhost:8080/quick</p>
<figure data-type="image" tabindex="1"><img src="https://tinaxiawuhao.github.io/post-images/1621326470668.png" alt="" loading="lazy"></figure>
<h2 id="22-快速入门解析">2.2 快速入门解析</h2>
<h3 id="222-springboot代码解析">2.2.2 SpringBoot代码解析</h3>
<ul>
<li>@SpringBootApplication：标注SpringBoot的启动类，该注解具备多种功能（后面详细剖析）</li>
<li>SpringApplication.run(MySpringBootApplication.class) 代表运行SpringBoot的启动类，参数为SpringBoot启动类的字节码对象</li>
</ul>
<h3 id="223-springboot工程热部署">2.2.3 SpringBoot工程热部署</h3>
<p>我们在开发中反复修改类、页面等资源，每次修改后都是需要重新启动才生效，这样每次启动都很麻烦，浪费了大量的时间，我们可以在修改代码后不重启就能生效，在 pom.xml 中添加如下配置就可以实现这样的功能，我们称之为热部署。</p>
<pre><code class="language-xml">&lt;!--热部署配置--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>注意：IDEA进行SpringBoot热部署失败原因</p>
<p>出现这种情况，并不是热部署配置问题，其根本原因是因为Intellij IEDA默认情况下不会自动编译，需要对IDEA进行自动编译的设置，如下：</p>
<figure data-type="image" tabindex="2"><img src="https://tinaxiawuhao.github.io/post-images/1621326573533.png" alt="" loading="lazy"></figure>
<p>然后 Shift+Ctrl+Alt+/，选择Registry</p>
<figure data-type="image" tabindex="3"><img src="https://tinaxiawuhao.github.io/post-images/1621326585849.png" alt="" loading="lazy"></figure>
<h3 id="224-使用idea快速创建springboot项目">2.2.4 使用idea快速创建SpringBoot项目</h3>
<figure data-type="image" tabindex="4"><img src="https://tinaxiawuhao.github.io/post-images/1621326603385.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="5"><img src="https://tinaxiawuhao.github.io/post-images/1621326620200.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="6"><img src="https://tinaxiawuhao.github.io/post-images/1621326640049.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="7"><img src="https://tinaxiawuhao.github.io/post-images/1621326656407.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="8"><img src="https://tinaxiawuhao.github.io/post-images/1621326697642.png" alt="" loading="lazy"></figure>
<p>通过idea快速创建的SpringBoot项目的pom.xml中已经导入了我们选择的web的起步依赖的坐标</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

	&lt;groupId&gt;com.itheima&lt;/groupId&gt;
	&lt;artifactId&gt;springboot_quick2&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
	&lt;packaging&gt;jar&lt;/packaging&gt;

	&lt;name&gt;springboot_quick2&lt;/name&gt;
	&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;

	&lt;parent&gt;
		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
		&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
		&lt;version&gt;2.0.1.RELEASE&lt;/version&gt;
		&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
	&lt;/parent&gt;

	&lt;properties&gt;
		&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
		&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
		&lt;java.version&gt;9&lt;/java.version&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
			&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
			&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
			&lt;scope&gt;test&lt;/scope&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;

	&lt;build&gt;
		&lt;plugins&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
				&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
			&lt;/plugin&gt;
		&lt;/plugins&gt;
	&lt;/build&gt;


&lt;/project&gt;

</code></pre>
<p>可以使用快速入门的方式创建Controller进行访问，此处不再赘述</p>
<h1 id="三-springboot原理分析">三、SpringBoot原理分析</h1>
<h2 id="31-起步依赖原理分析">3.1 起步依赖原理分析</h2>
<p><strong>3.1.1 分析spring-boot-starter-parent</strong></p>
<p>按住Ctrl点击pom.xml中的spring-boot-starter-parent，跳转到了spring-boot-starter-parent的pom.xml，xml配置如下（只摘抄了部分重点配置）：</p>
<pre><code class="language-xml">&lt;parent&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;
  &lt;version&gt;2.0.1.RELEASE&lt;/version&gt;
  &lt;relativePath&gt;../../spring-boot-dependencies&lt;/relativePath&gt;
&lt;/parent&gt;
</code></pre>
<p>按住Ctrl点击pom.xml中的spring-boot-starter-dependencies，跳转到了spring-boot-starter-dependencies的pom.xml，xml配置如下（只摘抄了部分重点配置）：</p>
<pre><code class="language-xml">&lt;properties&gt;
  	&lt;activemq.version&gt;5.15.3&lt;/activemq.version&gt;
  	&lt;antlr2.version&gt;2.7.7&lt;/antlr2.version&gt;
  	&lt;appengine-sdk.version&gt;1.9.63&lt;/appengine-sdk.version&gt;
  	&lt;artemis.version&gt;2.4.0&lt;/artemis.version&gt;
  	&lt;aspectj.version&gt;1.8.13&lt;/aspectj.version&gt;
  	&lt;assertj.version&gt;3.9.1&lt;/assertj.version&gt;
  	&lt;atomikos.version&gt;4.0.6&lt;/atomikos.version&gt;
  	&lt;bitronix.version&gt;2.1.4&lt;/bitronix.version&gt;
  	&lt;build-helper-maven-plugin.version&gt;3.0.0&lt;/build-helper-maven-plugin.version&gt;
  	&lt;byte-buddy.version&gt;1.7.11&lt;/byte-buddy.version&gt;
  	... ... ...
&lt;/properties&gt;
&lt;dependencyManagement&gt;
  	&lt;dependencies&gt;
      	&lt;dependency&gt;
        	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        	&lt;artifactId&gt;spring-boot&lt;/artifactId&gt;
        	&lt;version&gt;2.0.1.RELEASE&lt;/version&gt;
      	&lt;/dependency&gt;
      	&lt;dependency&gt;
        	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        	&lt;artifactId&gt;spring-boot-test&lt;/artifactId&gt;
        	&lt;version&gt;2.0.1.RELEASE&lt;/version&gt;
      	&lt;/dependency&gt;
      	... ... ...
	&lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
&lt;build&gt;
  	&lt;pluginManagement&gt;
    	&lt;plugins&gt;
      		&lt;plugin&gt;
        		&lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;
        		&lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;
        		&lt;version&gt;${kotlin.version}&lt;/version&gt;
      		&lt;/plugin&gt;
      		&lt;plugin&gt;
        		&lt;groupId&gt;org.jooq&lt;/groupId&gt;
        		&lt;artifactId&gt;jooq-codegen-maven&lt;/artifactId&gt;
        		&lt;version&gt;${jooq.version}&lt;/version&gt;
      		&lt;/plugin&gt;
      		&lt;plugin&gt;
        		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        		&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
        		&lt;version&gt;2.0.1.RELEASE&lt;/version&gt;
      		&lt;/plugin&gt;
          	... ... ...
    	&lt;/plugins&gt;
  	&lt;/pluginManagement&gt;
&lt;/build&gt;
</code></pre>
<p>从上面的spring-boot-starter-dependencies的pom.xml中我们可以发现，一部分坐标的版本、依赖管理、插件管理已经定义好，所以我们的SpringBoot工程继承spring-boot-starter-parent后已经具备版本锁定等配置了。所以起步依赖的作用就是进行依赖的传递。</p>
<p><strong>3.1.2 分析spring-boot-starter-web</strong></p>
<p>按住Ctrl点击pom.xml中的spring-boot-starter-web，跳转到了spring-boot-starter-web的pom.xml，xml配置如下（只摘抄了部分重点配置）：</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
  	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  	&lt;parent&gt;
    	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    	&lt;artifactId&gt;spring-boot-starters&lt;/artifactId&gt;
    	&lt;version&gt;2.0.1.RELEASE&lt;/version&gt;
  	&lt;/parent&gt;
  	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  	&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
  	&lt;version&gt;2.0.1.RELEASE&lt;/version&gt;
  	&lt;name&gt;Spring Boot Web Starter&lt;/name&gt;
  
  	&lt;dependencies&gt;
    	&lt;dependency&gt;
      		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      		&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;
      		&lt;version&gt;2.0.1.RELEASE&lt;/version&gt;
      		&lt;scope&gt;compile&lt;/scope&gt;
    	&lt;/dependency&gt;
    	&lt;dependency&gt;
      		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      		&lt;artifactId&gt;spring-boot-starter-json&lt;/artifactId&gt;
      		&lt;version&gt;2.0.1.RELEASE&lt;/version&gt;
      		&lt;scope&gt;compile&lt;/scope&gt;
    	&lt;/dependency&gt;
    	&lt;dependency&gt;
      		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      		&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
      		&lt;version&gt;2.0.1.RELEASE&lt;/version&gt;
      		&lt;scope&gt;compile&lt;/scope&gt;
    	&lt;/dependency&gt;
    	&lt;dependency&gt;
      		&lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;
      		&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;
      		&lt;version&gt;6.0.9.Final&lt;/version&gt;
      		&lt;scope&gt;compile&lt;/scope&gt;
    	&lt;/dependency&gt;
    	&lt;dependency&gt;
      		&lt;groupId&gt;org.springframework&lt;/groupId&gt;
      		&lt;artifactId&gt;spring-web&lt;/artifactId&gt;
      		&lt;version&gt;5.0.5.RELEASE&lt;/version&gt;
      		&lt;scope&gt;compile&lt;/scope&gt;
    	&lt;/dependency&gt;
    	&lt;dependency&gt;
      		&lt;groupId&gt;org.springframework&lt;/groupId&gt;
      		&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
      		&lt;version&gt;5.0.5.RELEASE&lt;/version&gt;
      		&lt;scope&gt;compile&lt;/scope&gt;
    	&lt;/dependency&gt;
  	&lt;/dependencies&gt;
&lt;/project&gt;

</code></pre>
<p>从上面的spring-boot-starter-web的pom.xml中我们可以发现，spring-boot-starter-web就是将web开发要使用的spring-web、spring-webmvc等坐标进行了“打包”，这样我们的工程只要引入spring-boot-starter-web起步依赖的坐标就可以进行web开发了，同样体现了依赖传递的作用。</p>
<h2 id="32-自动配置原理解析">3.2 自动配置原理解析</h2>
<p>按住Ctrl点击查看启动类MySpringBootApplication上的注解@SpringBootApplication</p>
<pre><code class="language-java">@SpringBootApplication
public class MySpringBootApplication {
    public static void main(String[] args) {
        SpringApplication.run(MySpringBootApplication.class);
    }
}
</code></pre>
<p>注解@SpringBootApplication的源码</p>
<pre><code class="language-java">@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@SpringBootConfiguration
@EnableAutoConfiguration
@ComponentScan(excludeFilters = {
		@Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),
		@Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })
public @interface SpringBootApplication {

	/**
	 * Exclude specific auto-configuration classes such that they will never be applied.
	 * @return the classes to exclude
	 */
	@AliasFor(annotation = EnableAutoConfiguration.class)
	Class&lt;?&gt;[] exclude() default {};

	... ... ...

}
</code></pre>
<p>@SpringBootConfiguration：等同与@Configuration，既标注该类是Spring的一个配置类</p>
<p>@EnableAutoConfiguration：SpringBoot自动配置功能开启</p>
<p>按住Ctrl点击查看注解@EnableAutoConfiguration</p>
<pre><code class="language-java">@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@AutoConfigurationPackage
@Import(AutoConfigurationImportSelector.class)
public @interface EnableAutoConfiguration {
	... ... ...
}
</code></pre>
<p>@Import(AutoConfigurationImportSelector.class) 导入了AutoConfigurationImportSelector类</p>
<p>按住Ctrl点击查看AutoConfigurationImportSelector源码</p>
<pre><code class="language-java">public String[] selectImports(AnnotationMetadata annotationMetadata) {
        ... ... ...
        List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata,
                                                                   attributes);
        configurations = removeDuplicates(configurations);
        Set&lt;String&gt; exclusions = getExclusions(annotationMetadata, attributes);
        checkExcludedClasses(configurations, exclusions);
        configurations.removeAll(exclusions);
        configurations = filter(configurations, autoConfigurationMetadata);
        fireAutoConfigurationImportEvents(configurations, exclusions);
        return StringUtils.toStringArray(configurations);
}


protected List&lt;String&gt; getCandidateConfigurations(AnnotationMetadata metadata,
			AnnotationAttributes attributes) {
		List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(
				getSpringFactoriesLoaderFactoryClass(), getBeanClassLoader());
		
		return configurations;
}

</code></pre>
<p>SpringFactoriesLoader.loadFactoryNames 方法的作用就是从META-INF/spring.factories文件中读取指定类对应的类名称列表</p>
<figure data-type="image" tabindex="9"><img src="https://tinaxiawuhao.github.io/post-images/1621326779183.png" alt="" loading="lazy"></figure>
<p>spring.factories 文件中有关自动配置的配置信息如下：</p>
<pre><code>... ... ...

org.springframework.boot.autoconfigure.web.reactive.function.client.WebClientAutoConfiguration,\
org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration,\
org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration,\
org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration,\
org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration,\
org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration,\

... ... ...
</code></pre>
<p>上面配置文件存在大量的以Configuration为结尾的类名称，这些类就是存有自动配置信息的类，而SpringApplication在获取这些类名后再加载</p>
<p>我们以ServletWebServerFactoryAutoConfiguration为例来分析源码：</p>
<pre><code class="language-java">@Configuration
@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)
@ConditionalOnClass(ServletRequest.class)
@ConditionalOnWebApplication(type = Type.SERVLET)
@EnableConfigurationProperties(ServerProperties.class)
@Import({ ServletWebServerFactoryAutoConfiguration.BeanPostProcessorsRegistrar.class,
		ServletWebServerFactoryConfiguration.EmbeddedTomcat.class,
		ServletWebServerFactoryConfiguration.EmbeddedJetty.class,
		ServletWebServerFactoryConfiguration.EmbeddedUndertow.class })
public class ServletWebServerFactoryAutoConfiguration {
	... ... ...
}

</code></pre>
<p>@EnableConfigurationProperties(ServerProperties.class) 代表加载ServerProperties服务器配置属性类</p>
<p>进入ServerProperties.class源码如下：</p>
<pre><code class="language-java">@ConfigurationProperties(prefix = &quot;server&quot;, ignoreUnknownFields = true)
public class ServerProperties {

	/**
	 * Server HTTP port.
	 */
	private Integer port;

	/**
	 * Network address to which the server should bind.
	 */
	private InetAddress address;
  
  	... ... ...
  
}
</code></pre>
<p>prefix = &quot;server&quot; 表示SpringBoot配置文件中的前缀，SpringBoot会将配置文件中以server开始的属性映射到该类的字段中。映射关系如下：</p>
<figure data-type="image" tabindex="10"><img src="https://tinaxiawuhao.github.io/post-images/1621326800187.png" alt="" loading="lazy"></figure>
<h1 id="四-springboot的配置文件">四、SpringBoot的配置文件</h1>
<h2 id="41-springboot配置文件类型">4.1 SpringBoot配置文件类型</h2>
<h3 id="411-springboot配置文件类型和作用">4.1.1 SpringBoot配置文件类型和作用</h3>
<p>SpringBoot是基于约定的，所以很多配置都有默认值，但如果想使用自己的配置替换默认配置的话，就可以使用application.properties或者application.yml（application.yaml）进行配置。</p>
<p>SpringBoot默认会从Resources目录下加载application.properties或application.yml（application.yaml）文件</p>
<p>其中，application.properties文件是键值对类型的文件，之前一直在使用，所以此处不在对properties文件的格式进行阐述。除了properties文件外，SpringBoot还可以使用yml文件进行配置，下面对yml文件进行讲解。</p>
<h3 id="412-applicationyml配置文件">4.1.2 application.yml配置文件</h3>
<p><strong>4.1.2.1 yml配置文件简介</strong></p>
<p>YML文件格式是YAML (YAML Aint Markup Language)编写的文件格式，YAML是一种直观的能够被电脑识别的的数据数据序列化格式，并且容易被人类阅读，容易和脚本语言交互的，可以被支持YAML库的不同的编程语言程序导入，比如： C/C++, Ruby, Python, Java, Perl, C#, PHP等。YML文件是以数据为核心的，比传统的xml方式更加简洁。</p>
<p>YML文件的扩展名可以使用.yml或者.yaml。</p>
<p><strong>4.1.2.2 yml配置文件的语法</strong></p>
<p><strong>4.1.2.2.1 配置普通数据</strong></p>
<ul>
<li>
<p>语法： key: value</p>
</li>
<li>
<p>示例代码：</p>
</li>
<li>
<pre><code class="language-yaml">name: haohao
</code></pre>
</li>
<li>
<p>注意：value之前有一个空格</p>
</li>
</ul>
<p><strong>4.1.2.2.2 配置对象数据</strong></p>
<ul>
<li>
<p>语法：</p>
<p>​	key:</p>
<p>​		key1: value1</p>
<p>​		key2: value2</p>
<p>​	或者：</p>
<p>​	key: {key1: value1,key2: value2}</p>
</li>
<li>
<p>示例代码：</p>
</li>
<li>
<pre><code class="language-yaml">person:
  name: haohao
  age: 31
  addr: beijing

#或者

person: {name: haohao,age: 31,addr: beijing}
</code></pre>
</li>
<li>
<p>注意：key1前面的空格个数不限定，在yml语法中，相同缩进代表同一个级别</p>
</li>
</ul>
<p><strong>4.1.2.2.3 配置数组（List、Set）数据</strong></p>
<ul>
<li>
<p>语法：</p>
<p>​	key:</p>
<p>​		- value1</p>
<p>​		- value2</p>
<p>或者：</p>
<p>​	key: [value1,value2]</p>
</li>
<li>
<p>示例代码：</p>
</li>
<li>
<pre><code class="language-yaml">city:
  - beijing
  - tianjin
  - shanghai
  - chongqing
  
#或者

city: [beijing,tianjin,shanghai,chongqing]

#集合中的元素是对象形式
student:
  - name: zhangsan
    age: 18
    score: 100
  - name: lisi
    age: 28
    score: 88
  - name: wangwu
    age: 38
    score: 90
</code></pre>
</li>
<li>
<p>注意：value1与之间的 - 之间存在一个空格</p>
</li>
</ul>
<h3 id="413-springboot配置信息的查询">4.1.3 SpringBoot配置信息的查询</h3>
<p>上面提及过，SpringBoot的配置文件，主要的目的就是对配置信息进行修改的，但在配置时的key从哪里去查询呢？我们可以查阅SpringBoot的官方文档,文档URL：https://docs.spring.io/spring-boot/docs/2.0.1.RELEASE/reference/htmlsingle/#common-application-properties</p>
<p>常用的配置摘抄如下：</p>
<pre><code class="language-xml"># QUARTZ SCHEDULER (QuartzProperties)
spring.quartz.jdbc.initialize-schema=embedded # Database schema initialization mode.
spring.quartz.jdbc.schema=classpath:org/quartz/impl/jdbcjobstore/tables_@@platform@@.sql # Path to the SQL file to use to initialize the database schema.
spring.quartz.job-store-type=memory # Quartz job store type.
spring.quartz.properties.*= # Additional Quartz Scheduler properties.

# ----------------------------------------
# WEB PROPERTIES
# ----------------------------------------

# EMBEDDED SERVER CONFIGURATION (ServerProperties)
server.port=8080 # Server HTTP port.
server.servlet.context-path= # Context path of the application.
server.servlet.path=/ # Path of the main dispatcher servlet.

# HTTP encoding (HttpEncodingProperties)
spring.http.encoding.charset=UTF-8 # Charset of HTTP requests and responses. Added to the &quot;Content-Type&quot; header if not set explicitly.

# JACKSON (JacksonProperties)
spring.jackson.date-format= # Date format string or a fully-qualified date format class name. For instance, `yyyy-MM-dd HH:mm:ss`.

# SPRING MVC (WebMvcProperties)
spring.mvc.servlet.load-on-startup=-1 # Load on startup priority of the dispatcher servlet.
spring.mvc.static-path-pattern=/** # Path pattern used for static resources.
spring.mvc.view.prefix= # Spring MVC view prefix.
spring.mvc.view.suffix= # Spring MVC view suffix.

# DATASOURCE (DataSourceAutoConfiguration &amp; DataSourceProperties)
spring.datasource.driver-class-name= # Fully qualified name of the JDBC driver. Auto-detected based on the URL by default.
spring.datasource.password= # Login password of the database.
spring.datasource.url= # JDBC URL of the database.
spring.datasource.username= # Login username of the database.

# JEST (Elasticsearch HTTP client) (JestProperties)
spring.elasticsearch.jest.password= # Login password.
spring.elasticsearch.jest.proxy.host= # Proxy host the HTTP client should use.
spring.elasticsearch.jest.proxy.port= # Proxy port the HTTP client should use.
spring.elasticsearch.jest.read-timeout=3s # Read timeout.
spring.elasticsearch.jest.username= # Login username.

</code></pre>
<p>我们可以通过配置application.poperties 或者 application.yml 来修改SpringBoot的默认配置</p>
<p>例如：</p>
<p>application.properties文件</p>
<pre><code class="language-java">server.port=8888
server.servlet.context-path=demo
</code></pre>
<p>application.yml文件</p>
<pre><code class="language-yaml">server:
  port: 8888
  servlet:
    context-path: /demo
</code></pre>
<h2 id="42-配置文件与配置类的属性映射方式">4.2 配置文件与配置类的属性映射方式</h2>
<h3 id="421-使用注解value映射">4.2.1 使用注解@Value映射</h3>
<p>我们可以通过@Value注解将配置文件中的值映射到一个Spring管理的Bean的字段上</p>
<p>例如：</p>
<p>application.properties配置如下：</p>
<pre><code class="language-yaml">person:
  name: zhangsan
  age: 18
</code></pre>
<p>或者，application.yml配置如下：</p>
<pre><code class="language-yaml">person:
  name: zhangsan
  age: 18
</code></pre>
<p>实体Bean代码如下：</p>
<pre><code class="language-java">@Controller
public class QuickStartController {

    @Value(&quot;${person.name}&quot;)
    private String name;
    @Value(&quot;${person.age}&quot;)
    private Integer age;


    @RequestMapping(&quot;/quick&quot;)
    @ResponseBody
    public String quick(){
        return &quot;springboot 访问成功! name=&quot;+name+&quot;,age=&quot;+age;
    }

}
</code></pre>
<p>浏览器访问地址：http://localhost:8080/quick 结果如下：</p>
<figure data-type="image" tabindex="11"><img src="https://tinaxiawuhao.github.io/post-images/1621326747717.png" alt="" loading="lazy"></figure>
<h3 id="422-使用注解configurationproperties映射">4.2.2 使用注解@ConfigurationProperties映射</h3>
<p>通过注解@ConfigurationProperties(prefix=&quot;配置文件中的key的前缀&quot;)可以将配置文件中的配置自动与实体进行映射</p>
<p>application.properties配置如下：</p>
<pre><code class="language-yaml">person:
  name: zhangsan
  age: 18
</code></pre>
<p>或者，application.yml配置如下：</p>
<pre><code class="language-yaml">person:
  name: zhangsan
  age: 18
</code></pre>
<p>实体Bean代码如下：</p>
<pre><code class="language-java">@Controller
@ConfigurationProperties(prefix = &quot;person&quot;)
public class QuickStartController {

    private String name;
    private Integer age;

    @RequestMapping(&quot;/quick&quot;)
    @ResponseBody
    public String quick(){
        return &quot;springboot 访问成功! name=&quot;+name+&quot;,age=&quot;+age;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setAge(Integer age) {
        this.age = age;
    }
}
</code></pre>
<p>浏览器访问地址：http://localhost:8080/quick 结果如下：</p>
<figure data-type="image" tabindex="12"><img src="https://tinaxiawuhao.github.io/post-images/1621326821666.png" alt="" loading="lazy"></figure>
<p>注意：使用@ConfigurationProperties方式可以进行配置文件与实体字段的自动映射，但需要字段必须提供set方法才可以，而使用@Value注解修饰的字段不需要提供set方法</p>
<h1 id="五-springboot与整合其他技术">五、SpringBoot与整合其他技术</h1>
<h2 id="51-springboot整合mybatis">5.1 SpringBoot整合Mybatis</h2>
<p><strong>5.1.1 添加Mybatis的起步依赖</strong></p>
<pre><code class="language-xml">&lt;!--mybatis起步依赖--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;1.1.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p><strong>5.1.2 添加数据库驱动坐标</strong></p>
<pre><code class="language-xml">&lt;!-- MySQL连接驱动 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p><strong>5.1.3 添加数据库连接信息</strong></p>
<p>在application.properties中添加数据量的连接信息</p>
<pre><code class="language-yaml">#DB Configuration:
spring.datasource.driverClassName=com.mysql.jdbc.Driver
spring.datasource.url=jdbc:mysql://127.0.0.1:3306/test?useUnicode=true&amp;characterEncoding=utf8
spring.datasource.username=root
spring.datasource.password=root
</code></pre>
<p><strong>5.1.4 创建user表</strong></p>
<p>在test数据库中创建user表</p>
<pre><code class="language-sql">-- ----------------------------
-- Table structure for `user`
-- ----------------------------
DROP TABLE IF EXISTS `user`;
CREATE TABLE `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) DEFAULT NULL,
  `password` varchar(50) DEFAULT NULL,
  `name` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of user
-- ----------------------------
INSERT INTO `user` VALUES ('1', 'zhangsan', '123', '张三');
INSERT INTO `user` VALUES ('2', 'lisi', '123', '李四');
</code></pre>
<p><strong>5.1.5 创建实体Bean</strong></p>
<pre><code class="language-java">public class User {
    // 主键
    private Long id;
    // 用户名
    private String username;
    // 密码
    private String password;
    // 姓名
    private String name;
  
    //此处省略getter和setter方法 .. ..
    
}
</code></pre>
<p><strong>5.1.6 编写Mapper</strong></p>
<pre><code class="language-java">@Mapper
public interface UserMapper {
	public List&lt;User&gt; queryUserList();
}
</code></pre>
<p>注意：@Mapper标记该类是一个mybatis的mapper接口，可以被spring boot自动扫描到spring上下文中</p>
<p><strong>5.1.7 配置Mapper映射文件</strong></p>
<p>在src\main\resources\mapper路径下加入UserMapper.xml配置文件&quot;</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot; &gt;
&lt;mapper namespace=&quot;com.itheima.mapper.UserMapper&quot;&gt;
    &lt;select id=&quot;queryUserList&quot; resultType=&quot;user&quot;&gt;
        select * from user
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>
<p><strong>5.1.8 在application.properties中添加mybatis的信息</strong></p>
<pre><code class="language-yaml">#spring集成Mybatis环境
#pojo别名扫描包
mybatis.type-aliases-package=com.itheima.domain
#加载Mybatis映射文件
mybatis.mapper-locations=classpath:mapper/*Mapper.xml
</code></pre>
<p><strong>5.1.9 编写测试Controller</strong></p>
<pre><code class="language-java">@Controller
public class MapperController {

    @Autowired
    private UserMapper userMapper;

    @RequestMapping(&quot;/queryUser&quot;)
    @ResponseBody
    public List&lt;User&gt; queryUser(){
        List&lt;User&gt; users = userMapper.queryUserList();
        return users;
    }

}
</code></pre>
<p><strong>5.1.10 测试</strong></p>
<figure data-type="image" tabindex="13"><img src="https://tinaxiawuhao.github.io/post-images/1621326842189.png" alt="" loading="lazy"></figure>
<h2 id="52-springboot整合junit">5.2 SpringBoot整合Junit</h2>
<p><strong>5.2.1 添加Junit的起步依赖</strong></p>
<pre><code class="language-xml">&lt;!--测试的起步依赖--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
<p><strong>5.2.2 编写测试类</strong></p>
<pre><code class="language-java">package com.itheima.test;

import com.itheima.MySpringBootApplication;
import com.itheima.domain.User;
import com.itheima.mapper.UserMapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest(classes = MySpringBootApplication.class)
public class MapperTest {

    @Autowired
    private UserMapper userMapper;

    @Test
    public void test() {
        List&lt;User&gt; users = userMapper.queryUserList();
        System.out.println(users);
    }

}
</code></pre>
<p>其中，</p>
<p>SpringRunner继承自SpringJUnit4ClassRunner，使用哪一个Spring提供的测试测试引擎都可以</p>
<pre><code class="language-java">public final class SpringRunner extends SpringJUnit4ClassRunner 
</code></pre>
<p>@SpringBootTest的属性指定的是引导类的字节码对象</p>
<p><strong>5.2.3 控制台打印信息</strong></p>
<figure data-type="image" tabindex="14"><img src="https://tinaxiawuhao.github.io/post-images/1621326860451.png" alt="" loading="lazy"></figure>
<h2 id="53-springboot整合spring-data-jpa">5.3 SpringBoot整合Spring Data JPA</h2>
<p><strong>5.3.1 添加Spring Data JPA的起步依赖</strong></p>
<pre><code class="language-xml">&lt;!-- springBoot JPA的起步依赖 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p><strong>5.3.2 添加数据库驱动依赖</strong></p>
<pre><code class="language-xml">&lt;!-- MySQL连接驱动 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p><strong>5.3.3 在application.properties中配置数据库和jpa的相关属性</strong></p>
<pre><code class="language-yaml">#DB Configuration:
spring.datasource.driverClassName=com.mysql.jdbc.Driver
spring.datasource.url=jdbc:mysql://127.0.0.1:3306/test?useUnicode=true&amp;characterEncoding=utf8
spring.datasource.username=root
spring.datasource.password=root

#JPA Configuration:
spring.jpa.database=MySQL
spring.jpa.show-sql=true
spring.jpa.generate-ddl=true
spring.jpa.hibernate.ddl-auto=update
spring.jpa.hibernate.naming_strategy=org.hibernate.cfg.ImprovedNamingStrategy
</code></pre>
<p><strong>5.3.4 创建实体配置实体</strong></p>
<pre><code class="language-java">@Entity
public class User {
    // 主键
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    // 用户名
    private String username;
    // 密码
    private String password;
    // 姓名
    private String name;
 
    //此处省略setter和getter方法... ...
}
</code></pre>
<p><strong>5.3.5 编写UserRepository</strong></p>
<pre><code class="language-java">public interface UserRepository extends JpaRepository&lt;User,Long&gt;{
    public List&lt;User&gt; findAll();
}
</code></pre>
<p><strong>5.3.6 编写测试类</strong></p>
<pre><code class="language-java">@RunWith(SpringRunner.class)
@SpringBootTest(classes=MySpringBootApplication.class)
public class JpaTest {

    @Autowired
    private UserRepository userRepository;

    @Test
    public void test(){
        List&lt;User&gt; users = userRepository.findAll();
        System.out.println(users);
    }

}
</code></pre>
<p><strong>5.3.7 控制台打印信息</strong></p>
<figure data-type="image" tabindex="15"><img src="https://tinaxiawuhao.github.io/post-images/1621326882957.png" alt="" loading="lazy"></figure>
<p>注意：如果是jdk9，执行报错如下：</p>
<figure data-type="image" tabindex="16"><img src="https://tinaxiawuhao.github.io/post-images/1621326901468.png" alt="" loading="lazy"></figure>
<p>原因：jdk缺少相应的jar</p>
<p>解决方案：手动导入对应的maven坐标，如下：</p>
<pre><code class="language-xml">&lt;!--jdk9需要导入如下坐标--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;
    &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;
    &lt;version&gt;2.3.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h2 id="54-springboot整合redis">5.4 SpringBoot整合Redis</h2>
<p><strong>5.4.1 添加redis的起步依赖</strong></p>
<pre><code class="language-xml">&lt;!-- 配置使用redis启动器 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p><strong>5.4.2 配置redis的连接信息</strong></p>
<pre><code class="language-yaml">#Redis
spring.redis.host=127.0.0.1
spring.redis.port=6379
</code></pre>
<p><strong>5.4.3 注入RedisTemplate测试redis操作</strong></p>
<pre><code class="language-java">@RunWith(SpringRunner.class)
@SpringBootTest(classes = SpringbootJpaApplication.class)
public class RedisTest {

    @Autowired
    private UserRepository userRepository;

    @Autowired
    private RedisTemplate&lt;String, String&gt; redisTemplate;

    @Test
    public void test() throws JsonProcessingException {
        //从redis缓存中获得指定的数据
        String userListData = redisTemplate.boundValueOps(&quot;user.findAll&quot;).get();
        //如果redis中没有数据的话
        if(null==userListData){
            //查询数据库获得数据
            List&lt;User&gt; all = userRepository.findAll();
            //转换成json格式字符串
            ObjectMapper om = new ObjectMapper();
            userListData = om.writeValueAsString(all);
            //将数据存储到redis中，下次在查询直接从redis中获得数据，不用在查询数据库
            redisTemplate.boundValueOps(&quot;user.findAll&quot;).set(userListData);
            System.out.println(&quot;===============从数据库获得数据===============&quot;);
        }else{
            System.out.println(&quot;===============从redis缓存中获得数据===============&quot;);
        }

        System.out.println(userListData);

    }

}
</code></pre>

          <div class="toc-container"><ul class="markdownIt-TOC">
<li><a href="#%E4%B8%80-springboot%E7%AE%80%E4%BB%8B">一、SpringBoot简介</a>
<ul>
<li><a href="#11-%E5%8E%9F%E6%9C%89spring%E4%BC%98%E7%BC%BA%E7%82%B9%E5%88%86%E6%9E%90">1.1  原有Spring优缺点分析</a></li>
<li><a href="#12-springboot%E7%9A%84%E6%A6%82%E8%BF%B0">1.2 SpringBoot的概述</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C-springboot%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8">二、SpringBoot快速入门</a>
<ul>
<li><a href="#21-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0">2.1 代码实现</a>
<ul>
<li><a href="#211-%E5%88%9B%E5%BB%BAmaven%E5%B7%A5%E7%A8%8B">2.1.1 创建Maven工程</a></li>
<li><a href="#212-%E6%B7%BB%E5%8A%A0springboot%E7%9A%84%E8%B5%B7%E6%AD%A5%E4%BE%9D%E8%B5%96">2.1.2 添加SpringBoot的起步依赖</a></li>
<li><a href="#213-%E7%BC%96%E5%86%99springboot%E5%BC%95%E5%AF%BC%E7%B1%BB">2.1.3 编写SpringBoot引导类</a></li>
<li><a href="#214-%E7%BC%96%E5%86%99controller">2.1.4 编写Controller</a></li>
<li><a href="#215-%E6%B5%8B%E8%AF%95">2.1.5 测试</a></li>
</ul>
</li>
<li><a href="#22-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E8%A7%A3%E6%9E%90">2.2 快速入门解析</a>
<ul>
<li><a href="#222-springboot%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90">2.2.2 SpringBoot代码解析</a></li>
<li><a href="#223-springboot%E5%B7%A5%E7%A8%8B%E7%83%AD%E9%83%A8%E7%BD%B2">2.2.3 SpringBoot工程热部署</a></li>
<li><a href="#224-%E4%BD%BF%E7%94%A8idea%E5%BF%AB%E9%80%9F%E5%88%9B%E5%BB%BAspringboot%E9%A1%B9%E7%9B%AE">2.2.4 使用idea快速创建SpringBoot项目</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E4%B8%89-springboot%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90">三、SpringBoot原理分析</a>
<ul>
<li><a href="#31-%E8%B5%B7%E6%AD%A5%E4%BE%9D%E8%B5%96%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90">3.1 起步依赖原理分析</a></li>
<li><a href="#32-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90">3.2 自动配置原理解析</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9B-springboot%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">四、SpringBoot的配置文件</a>
<ul>
<li><a href="#41-springboot%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B">4.1 SpringBoot配置文件类型</a>
<ul>
<li><a href="#411-springboot%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%92%8C%E4%BD%9C%E7%94%A8">4.1.1 SpringBoot配置文件类型和作用</a></li>
<li><a href="#412-applicationyml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">4.1.2 application.yml配置文件</a></li>
<li><a href="#413-springboot%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E7%9A%84%E6%9F%A5%E8%AF%A2">4.1.3 SpringBoot配置信息的查询</a></li>
</ul>
</li>
<li><a href="#42-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%8E%E9%85%8D%E7%BD%AE%E7%B1%BB%E7%9A%84%E5%B1%9E%E6%80%A7%E6%98%A0%E5%B0%84%E6%96%B9%E5%BC%8F">4.2 配置文件与配置类的属性映射方式</a>
<ul>
<li><a href="#421-%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3value%E6%98%A0%E5%B0%84">4.2.1 使用注解@Value映射</a></li>
<li><a href="#422-%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3configurationproperties%E6%98%A0%E5%B0%84">4.2.2 使用注解@ConfigurationProperties映射</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E4%BA%94-springboot%E4%B8%8E%E6%95%B4%E5%90%88%E5%85%B6%E4%BB%96%E6%8A%80%E6%9C%AF">五、SpringBoot与整合其他技术</a>
<ul>
<li><a href="#51-springboot%E6%95%B4%E5%90%88mybatis">5.1 SpringBoot整合Mybatis</a></li>
<li><a href="#52-springboot%E6%95%B4%E5%90%88junit">5.2 SpringBoot整合Junit</a></li>
<li><a href="#53-springboot%E6%95%B4%E5%90%88spring-data-jpa">5.3 SpringBoot整合Spring Data JPA</a></li>
<li><a href="#54-springboot%E6%95%B4%E5%90%88redis">5.4 SpringBoot整合Redis</a></li>
</ul>
</li>
</ul>
</div>
          
              <hr />
            
          
            
            <p class="next-post">上一篇：
                <a href="https://tinaxiawuhao.github.io/post/YkvDN4zR3/">
                  <span class="post-title">
                    SpringBoot自动装配原理&rarr;
                  </span>
                </a>
              </p>
            
          
            
           <p class="prev-post">下一篇：
                 <a href="https://tinaxiawuhao.github.io/post/Ari4Sf8A0/">
                   <span class="post-title">
                     springBoot,mybatis,druid整合&rarr;
                   </span>
                 </a>
               </p>
          
          <div class="comment" style="text-align: center;">
            

            
            
          </div>
        </div>
      </div>
  </article>
  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <ul class="list-inline text-center">
            
            
            <li class="list-inline-item">
              <a href="https://github.com/tinaxiawuhao" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <!-- <li class="list-inline-item">
              <a href="https://tinaxiawuhao.github.io/atom.xml" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                </span>
              </a>
              </li> -->
          </ul>
          <p class="copyright text-muted">Copyright &copy;<span>tianxia</span><br><a href="https://github.com/getgridea/gridea" class="Themeinfo">Powered by Gridea</a></p>
        </div>
      </div>
    </div>
   </footer>
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
  <!-- <script src="https://tinaxiawuhao.github.io/media/scripts/bootstrap.bundle.min.js"></script> -->
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.jsdelivr.net/gh/Alanrk/clean-cdn@1.0/scripts/clean-blog.min.js"></script>
  <!-- <script src="https://tinaxiawuhao.github.io/media/scripts/clean-blog.min.js"></script> -->
  <style type="text/css">a.back_to_top{text-decoration:none;position:fixed;bottom:40px;right:30px;background:#f0f0f0;height:40px;width:40px;border-radius:50%;line-height:36px;font-size:18px;text-align:center;transition-duration:.5s;transition-propety:background-color;display:none}a.back_to_top span{color:#888}a.back_to_top:hover{cursor:pointer;background:#dfdfdf}a.back_to_top:hover span{color:#555}@media print,screen and(max-width:580px){.back_to_top{display:none!important}}</style>
<a id="back_to_top" href="#" class="back_to_top">
  <span>▲</span></a>
<script>$(document).ready((function(_this) {
    return function() {
      var bt;
      bt = $('#back_to_top');
      if ($(document).width() > 480) {
        $(window).scroll(function() {
          var st;
          st = $(window).scrollTop();
          if (st > 30) {
            return bt.css('display', 'block')
          } else {
            return bt.css('display', 'none')
          }
        });
        return bt.click(function() {
          $('body,html').animate({
            scrollTop: 0
          },
          800);
          return false
        })
      }
    }
  })(this));</script>
  
  <div id="landlord-parent">
    <div id="landlord">
        <div class="message" style="opacity:0"></div>
        <canvas id="live2d" width="240" height="250" class="live2d"></canvas>
    </div>
</div>

<script type="text/javascript">
    if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {
        //移动端
        console.log("------ 移动端");
    } else {
        console.log("------ PC端 " + navigator.userAgent);

        addScript("https://cdn.jsdelivr.net/gh/850552586/ericamcdn@0.1/js/live2d.js", () => {
            // 加载完成后再loadlive2d
            loadlive2d("live2d", "https://tinaxiawuhao.github.io/media/live2d/assets/tororo.model.json");
        });

        var home_Path = "https://tinaxiawuhao.github.io/";
        addScript("https://tinaxiawuhao.github.io/media/live2d/js/message.js", () => { });
    }

    // 插入js文件，完成后callback
    function addScript(jsfile, callback) {
        var landlord_parent = document.getElementById("landlord-parent");
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = jsfile;
        landlord_parent.appendChild(script);
        script.onload = script.onreadystatechange = function () {
            if (!this.readyState || this.readyState === "loaded" || this.readyState === "complete") {
                script.onload = script.onreadystatechange = null;
                if (callback && typeof callback == "function") {
                    callback(); //window[callback]();如果传递字符串过来 调用window['函数名']() 调用方法
                }
            }
        };
    }
</script>
  
  <script src="https://tinaxiawuhao.github.io/media/scripts/tocScript.js"></script>
</body>

</html>