<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="black" name="apple-mobile-web-app-status-bar-style" />
<meta name="referrer" content="never">
<meta name="keywords" content="">
<meta name="description" content="欢迎访问[tianxia]的个人博客">
<meta name="author" content="kveln">
<title>gradle-Logging | tianxia</title>
<link rel="stylesheet" href="https://tinaxiawuhao.github.io/resource/bootstrap.min.css">
<link href="https://tinaxiawuhao.github.io/resource/all.min.css" rel="stylesheet">
<link rel="alternate" type="application/rss+xml" title="gradle-Logging | tianxia » Feed"
  href="https://tinaxiawuhao.github.io/atom.xml">
<link rel="stylesheet"
  href="https://tinaxiawuhao.github.io/resource/androidstudio.min.css">
<link href="https://tinaxiawuhao.github.io/styles/main.css" rel="stylesheet">
<script src="https://tinaxiawuhao.github.io/resource/jquery.min.js"></script>

<script src="https://tinaxiawuhao.github.io/resource/highlight.min.js"></script>

<link rel="stylesheet" href="https://tinaxiawuhao.github.io/resource/live2d.css">

<script>hljs.initHighlightingOnLoad();</script>

  <meta property="og:description" content="gradle-Logging" />
  <meta property="og:url" content="https://tinaxiawuhao.github.io/post/wYNztHepH/" />
  <meta property="og:locale" content="zh-CN" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="tianxia" />
  <!-- <script src="../assets/styles/scripts/tocScript.js"></script> -->
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="https://tinaxiawuhao.github.io">tianxia</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
      data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
      aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        
        <li class="nav-item">
          
          <a class="nav-link" href="/">首页</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/archives">归档</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/tags">标签</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/post/about">关于</a>
          
        </li>
        
        <li class="nav-item">
          <div class="gridea-search-container">
            <form id="gridea-search-form" style="position: relative" data-update="1663068709855"
              action="/search/index.html">
              <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
              <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
  <!-- Page Header -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="https://tinaxiawuhao.github.io">tianxia</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
      data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
      aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        
        <li class="nav-item">
          
          <a class="nav-link" href="/">首页</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/archives">归档</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/tags">标签</a>
          
        </li>
        
        <li class="nav-item">
          
          <a class="nav-link" href="/post/about">关于</a>
          
        </li>
        
        <li class="nav-item">
          <div class="gridea-search-container">
            <form id="gridea-search-form" style="position: relative" data-update="1663068709855"
              action="/search/index.html">
              <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
              <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
<header class="masthead" style="background-image: url('https://tinaxiawuhao.github.io/media/images/home-bg.jpg')">
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        
          <!-- 没Title为其他页面Header -->
          
            <!-- 没Title并且有headerType为Post：文章Header -->
            <div class="post-heading">
              <span class="tags">
                
                <a href="https://tinaxiawuhao.github.io/tag/_whMOC5wx/" class="tag">gradle</a>
                
              </span>
              <h1>gradle-Logging</h1>
              <span class="meta">
                Posted on
                2021-07-05，5 min read
              </span>
            </div>
          
        
      </div>
    </div>
  </div>
</header>
  <!-- Post Content -->
  <article id="post-content-article">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto post-content-container">
          
          <img class="post-feature-header-image" src="https://tinaxiawuhao.github.io/post-images/wYNztHepH.png" alt="封面图">
          </img>
          
          <h3 id="logging">Logging</h3>
<h3 id="日志级别">日志级别</h3>
<table>
<thead>
<tr>
<th style="text-align:left">日志级别</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ERROR</td>
<td style="text-align:left">错误讯息</td>
</tr>
<tr>
<td style="text-align:left">QUIET</td>
<td style="text-align:left">重要信息消息</td>
</tr>
<tr>
<td style="text-align:left">WARNING</td>
<td style="text-align:left">警告讯息</td>
</tr>
<tr>
<td style="text-align:left">LIFECYCLE</td>
<td style="text-align:left">进度信息消息</td>
</tr>
<tr>
<td style="text-align:left">INFO</td>
<td style="text-align:left">信息讯息</td>
</tr>
<tr>
<td style="text-align:left">DEBUG</td>
<td style="text-align:left">调试信息</td>
</tr>
</tbody>
</table>
<h3 id="选择日志级别">选择日志级别</h3>
<p>可以通过命令行选项或者gradle.properties文件配置</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">输出日志级别</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">没有记录选项</td>
<td style="text-align:left">LIFECYCLE及更高</td>
</tr>
<tr>
<td style="text-align:left">-q or--quiet</td>
<td style="text-align:left">QUIET及更高</td>
</tr>
<tr>
<td style="text-align:left">-w or --warn</td>
<td style="text-align:left">WARNING及更高</td>
</tr>
<tr>
<td style="text-align:left">-i or --info</td>
<td style="text-align:left">INFO及更高</td>
</tr>
<tr>
<td style="text-align:left">-d or --debug</td>
<td style="text-align:left">DEBUG及更高版本（即所有日志消息）</td>
</tr>
</tbody>
</table>
<h3 id="stacktrace命令行选项">Stacktrace命令行选项</h3>
<p><strong>-s or --stacktrace</strong></p>
<p>打印简洁的堆栈跟踪信息，推荐使用</p>
<p><strong>-S or --full-stacktrace</strong></p>
<p>打印完整的堆栈跟踪信息。</p>
<h3 id="编写日志">编写日志</h3>
<h4 id="使用stdout编写日志消息">使用stdout编写日志消息</h4>
<pre><code class="language-shell">println 'A message which is logged at QUIET level'
</code></pre>
<h4 id="编写自己的日志消息">编写自己的日志消息</h4>
<pre><code class="language-java">logger.quiet('An info log message which is always logged.')
logger.error('An error log message.')
logger.warn('A warning log message.')
logger.lifecycle('A lifecycle info log message.')
logger.info('An info log message.')
logger.debug('A debug log message.')
logger.trace('A trace log message.') // Gradle never logs TRACE level logs
 
// 用占位符写一条日志消息
logger.info('A {} log message', 'info')
</code></pre>
<p>logger构建脚本提供了一个属性，该脚本是Logger的实例。该接口扩展了SLF4JLogger接口，并向其中添加了一些Gradle特定的方法</p>
<h3 id="使用slf4j写入日志消息">使用SLF4J写入日志消息</h3>
<pre><code class="language-java">import org.slf4j.LoggerFactory
 
def slf4jLogger = LoggerFactory.getLogger('some-logger')
slf4jLogger.info('An info log message logged using SLF4j')
</code></pre>
<h3 id="构建生命周期">构建生命周期</h3>
<p>Gradle的核心是一种基于依赖性的编程语言，这意味着你可以定义任务和任务之间的依赖关系。 Gradle保证这些任务按照其依赖关系的顺序执行，并且每个任务只执行一次。 这些任务形成一个定向无环图。</p>
<h4 id="构建阶段">构建阶段</h4>
<p>Gradle构建具有三个不同的阶段。</p>
<ul>
<li>
<p>初始化</p>
<p>Gradle支持单项目和多项目构建。在初始化阶段，Gradle决定要参与构建的项目，并为每个项目创建一个Project实例。</p>
</li>
<li>
<p>配置</p>
<p>在此阶段，将配置项目对象。执行作为构建一部分的 所有 项目的构建脚本。</p>
</li>
<li>
<p>执行</p>
<p>Gradle确定要在配置阶段创建和配置的任务子集。子集由传递给gradle命令的任务名称参数和当前目录确定。然后Gradle执行每个选定的任务。</p>
</li>
</ul>
<h4 id="设置文件">设置文件</h4>
<p>默认名称是settings.gradle</p>
<p>项目构建在多项目层次结构的根项目中必须具有一个settings.gradle文件。</p>
<p>对于单项目构建，设置文件是可选的</p>
<h4 id="初始化">初始化</h4>
<p>查找settings.gradle文件判断是否多项目</p>
<p>没有settings.gradle或settings.gradle没有多项目配置则为单项目</p>
<p>例：将test任务添加到每个具有特定属性集的项目</p>
<p>build.gradle</p>
<pre><code class="language-java"> allprojects {
    afterEvaluate { project -&gt;
        if (project.hasTests) {
            println &quot;Adding test task to $project&quot;
            project.task('test') {
                doLast {
                    println &quot;Running tests for $project&quot;
                }
            }
        }
    }
}
 
</code></pre>
<p>输出 gradle -q test</p>
<pre><code class="language-shell">&gt; gradle -q test
Adding test task to project ':project-a'
Running tests for project ':project-a'
</code></pre>
<h3 id="初始化脚本">初始化脚本</h3>
<p>初始化脚本与Gradle中的其他脚本相似。但是，这些脚本在构建开始之前运行。初始化脚本不能访问buildSrc项目中的类。</p>
<h4 id="使用初始化脚本">使用初始化脚本</h4>
<p>有几种使用初始化脚本的方法：</p>
<ul>
<li>在命令行中指定一个文件。命令行选项是-I或-init-script，后面是脚本的路径。</li>
</ul>
<p>命令行选项可以出现一次以上，每次都会添加另一个 init 脚本。 如果命令行上指定的文件不存在，编译将失败。</p>
<ul>
<li>在 <em>USER_HOME</em> /.gradle/目录中放置一个名为init.gradle（或init.gradle.ktsKotlin）的文件。</li>
<li>在 <em>USER_HOME</em> /.gradle/init.d/目录中放置一个以.gradle（或.init.gradle.ktsKotlin）结尾的文件。</li>
<li>在Gradle发行版的 <em>GRADLE_HOME</em> /init.d/目录中放置一个以.gradle（或.init.gradle.ktsKotlin）结尾的文件。这使您可以打包包含一些自定义构建逻辑和插件的自定义Gradle发行版。您可以将其与Gradle Wrapper结合使用，以使自定义逻辑可用于企业中的所有内部版本。</li>
</ul>
<p>如果发现一个以上的初始化脚本，它们将按照上面指定的顺序依次执行。</p>
<p>示例</p>
<p>build.gradle</p>
<pre><code class="language-java">repositories {
    mavenCentral()
}
 
task showRepos {
    doLast {
        println &quot;All repos:&quot;
        println repositories.collect { it.name }
    }
}
 
</code></pre>
<p>init.gradle</p>
<pre><code class="language-java">allprojects {
    repositories {
        mavenLocal()
    }
}
</code></pre>
<p>运行任务：</p>
<pre><code class="language-shell">gradle --init-script init.gradle -q showRepos
</code></pre>
<h4 id="初始化脚本里面依赖添加依赖">初始化脚本里面依赖添加依赖</h4>
<p>init.gradle</p>
<pre><code class="language-java">initscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'org.apache.commons:commons-math:2.0'
    }
}
</code></pre>
<h3 id="多项目">多项目</h3>
<p>可在settings.gradle文件中设置多个项目关系，如下项目结构</p>
<pre><code class="language-shell">.
├── app
│   ...
│   └── build.gradle
└── settings.gradle
</code></pre>
<p>settings.gradle</p>
<pre><code class="language-java">rootProject.name = 'basic-multiproject' //根项目名
include 'app' //子项目
 
</code></pre>
<p>子项目间依赖</p>
<pre><code class="language-java">dependencies {
    implementation(project(&quot;:shared&quot;))
}
</code></pre>

          <div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#logging">Logging</a></li>
<li><a href="#%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB">日志级别</a></li>
<li><a href="#%E9%80%89%E6%8B%A9%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB">选择日志级别</a></li>
<li><a href="#stacktrace%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%80%89%E9%A1%B9">Stacktrace命令行选项</a></li>
<li><a href="#%E7%BC%96%E5%86%99%E6%97%A5%E5%BF%97">编写日志</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8stdout%E7%BC%96%E5%86%99%E6%97%A5%E5%BF%97%E6%B6%88%E6%81%AF">使用stdout编写日志消息</a></li>
<li><a href="#%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%A5%E5%BF%97%E6%B6%88%E6%81%AF">编写自己的日志消息</a></li>
</ul>
</li>
<li><a href="#%E4%BD%BF%E7%94%A8slf4j%E5%86%99%E5%85%A5%E6%97%A5%E5%BF%97%E6%B6%88%E6%81%AF">使用SLF4J写入日志消息</a></li>
<li><a href="#%E6%9E%84%E5%BB%BA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">构建生命周期</a>
<ul>
<li><a href="#%E6%9E%84%E5%BB%BA%E9%98%B6%E6%AE%B5">构建阶段</a></li>
<li><a href="#%E8%AE%BE%E7%BD%AE%E6%96%87%E4%BB%B6">设置文件</a></li>
<li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96">初始化</a></li>
</ul>
</li>
<li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E8%84%9A%E6%9C%AC">初始化脚本</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E8%84%9A%E6%9C%AC">使用初始化脚本</a></li>
<li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E8%84%9A%E6%9C%AC%E9%87%8C%E9%9D%A2%E4%BE%9D%E8%B5%96%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96">初始化脚本里面依赖添加依赖</a></li>
</ul>
</li>
<li><a href="#%E5%A4%9A%E9%A1%B9%E7%9B%AE">多项目</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
          
              <hr />
            
          
            
            <p class="next-post">上一篇：
                <a href="https://tinaxiawuhao.github.io/post/4WWjxpN2N/">
                  <span class="post-title">
                    Groovy基础&rarr;
                  </span>
                </a>
              </p>
            
          
            
           <p class="prev-post">下一篇：
                 <a href="https://tinaxiawuhao.github.io/post/Fe3q50EYd/">
                   <span class="post-title">
                     gradle依赖,插件&rarr;
                   </span>
                 </a>
               </p>
          
          <div class="comment" style="text-align: center;">
            

            
            
          </div>
        </div>
      </div>
  </article>
  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <ul class="list-inline text-center">
            
            
            <li class="list-inline-item">
              <a href="https://github.com/tinaxiawuhao" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <!-- <li class="list-inline-item">
              <a href="https://tinaxiawuhao.github.io/atom.xml" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                </span>
              </a>
              </li> -->
          </ul>
          <p class="copyright text-muted">Copyright &copy;<span>tianxia</span><br><a href="https://github.com/getgridea/gridea" class="Themeinfo">Powered by Gridea</a></p>
        </div>
      </div>
    </div>
   </footer>
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
  <!-- <script src="https://tinaxiawuhao.github.io/media/scripts/bootstrap.bundle.min.js"></script> -->
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.jsdelivr.net/gh/Alanrk/clean-cdn@1.0/scripts/clean-blog.min.js"></script>
  <!-- <script src="https://tinaxiawuhao.github.io/media/scripts/clean-blog.min.js"></script> -->
  <style type="text/css">a.back_to_top{text-decoration:none;position:fixed;bottom:40px;right:30px;background:#f0f0f0;height:40px;width:40px;border-radius:50%;line-height:36px;font-size:18px;text-align:center;transition-duration:.5s;transition-propety:background-color;display:none}a.back_to_top span{color:#888}a.back_to_top:hover{cursor:pointer;background:#dfdfdf}a.back_to_top:hover span{color:#555}@media print,screen and(max-width:580px){.back_to_top{display:none!important}}</style>
<a id="back_to_top" href="#" class="back_to_top">
  <span>▲</span></a>
<script>$(document).ready((function(_this) {
    return function() {
      var bt;
      bt = $('#back_to_top');
      if ($(document).width() > 480) {
        $(window).scroll(function() {
          var st;
          st = $(window).scrollTop();
          if (st > 30) {
            return bt.css('display', 'block')
          } else {
            return bt.css('display', 'none')
          }
        });
        return bt.click(function() {
          $('body,html').animate({
            scrollTop: 0
          },
          800);
          return false
        })
      }
    }
  })(this));</script>
  
  <div id="landlord-parent">
    <div id="landlord">
        <div class="message" style="opacity:0"></div>
        <canvas id="live2d" width="240" height="250" class="live2d"></canvas>
    </div>
</div>

<script type="text/javascript">
    if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {
        //移动端
        console.log("------ 移动端");
    } else {
        console.log("------ PC端 " + navigator.userAgent);

        addScript("https://cdn.jsdelivr.net/gh/850552586/ericamcdn@0.1/js/live2d.js", () => {
            // 加载完成后再loadlive2d
            loadlive2d("live2d", "https://tinaxiawuhao.github.io/media/live2d/assets/tororo.model.json");
        });

        var home_Path = "https://tinaxiawuhao.github.io/";
        addScript("https://tinaxiawuhao.github.io/media/live2d/js/message.js", () => { });
    }

    // 插入js文件，完成后callback
    function addScript(jsfile, callback) {
        var landlord_parent = document.getElementById("landlord-parent");
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = jsfile;
        landlord_parent.appendChild(script);
        script.onload = script.onreadystatechange = function () {
            if (!this.readyState || this.readyState === "loaded" || this.readyState === "complete") {
                script.onload = script.onreadystatechange = null;
                if (callback && typeof callback == "function") {
                    callback(); //window[callback]();如果传递字符串过来 调用window['函数名']() 调用方法
                }
            }
        };
    }
</script>
  
  <script src="https://tinaxiawuhao.github.io/media/scripts/tocScript.js"></script>
</body>

</html>